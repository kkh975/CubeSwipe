/*!*
 * @autor: Blim - Koo Chi Hoon(kkh975@naver.com)
 * @license http://blim.mit-license.org/
 */
function CubeSwipe(t){"use strict";function e(){var e=null,s=0;if(g=W.extend(D,t),E=W.isArray(g.wrap)?g.wrap:W.dom2Array(g.wrap),A=W.isArray(g.list)?g.list:W.dom2Array(g.list),T=W.isArray(g.pages)?g.pages:W.dom2Array(g.pages),_=W.isArray(g.toStart)?g.toStart:W.dom2Array(g.toStart),L=W.isArray(g.toStop)?g.toStop:W.dom2Array(g.toStop),k=W.isArray(g.toPrev)?g.toPrev:W.dom2Array(g.toPrev),M=W.isArray(g.toNext)?g.toNext:W.dom2Array(g.toNext),z=W.getCssPrefix(),B=A.length,console.log(E),console.log(W.isArray(g.wrap)),console.log(g.wrap),E=E[0],C=E.parentNode,g.touchMinumRange=Math.max(1,Math.min(100,g.touchMinumRange)),2>B)return!1;if(!(W.hasCss3Animation()&&"addEventListener"in window))return!1;for(g.slideShowTime&&("boolean"==typeof g.slideShowTime&&(N=g.slideShowTime,N&&(g.slideShowTime=D.slideShowTime)),"string"==typeof g.slideShowTime&&(g.slideShowTime=parseInt(g.slideShowTime,10)),isNaN(g.slideShowTime)?N=!1:(N=!0,2*g.duration>=g.slideShowTime&&(g.slideShowTime=2*g.duration))),_&&W.setBtnEvent(_,g.startEvents,i),L&&W.setBtnEvent(L,g.stopEvents,o),k&&W.setBtnEvent(k,g.moveEvents,v),M&&W.setBtnEvent(M,g.moveEvents,p),T&&W.setBtnEvent(T,g.moveEvents,function(t){h(t)}),2===B&&g.loop&&(e=A[0].cloneNode(!0),A.push(e),E.appendChild(e),e=A[1].cloneNode(!0),A.push(e),E.appendChild(e),J=!0,B=4),s=A.length,window.addEventListener("load",n,!1),C.addEventListener("touchstart",Z.setStart),C.addEventListener("touchmove",Z.setMove),C.addEventListener("touchend",Z.setEnd),C.addEventListener("touchcancel",Z.setEnd);--s>-1;)A[s].setAttribute("data-swipe-idx",s),A[s].addEventListener("focus",o,!1),A[s].addEventListener("blur",i,!1),A[s].addEventListener(z.transitionsendJs,y,!1),A[s].addEventListener(z.animationendJs,y,!1);return!0}function n(){var t=null,e="",n=0,s=0,o=0;for(I=C.offsetWidth,R=I/2,e="background: #fff;",C.style.cssText=e,W.setCss3(C,"perspective",2*I+"px"),e="position: relative; ",e+="width: 100%; ",e+="height: 100%; ",E.style.cssText=e,W.setCss3(E,"transform-style","preserve-3d"),W.setCss3(E,"transform","scale(0.75)"),W.setCss3(E,"backface-visibility","hidden"),o=0,s=B;s>o;o++)n=g.loop&&B-1===o?-b:b*o,e="position: absolute; ",e+="width: 100%; ",e+="height: 100%; ",e+="visibility: "+(2>o||B-1===o?"visible":"hidden"),A[o].style.cssText=e,W.setCss3Transition(A[o],0,n);e=W.getCss3AnimateTranslate("next-to-now",b,0),e+=W.getCss3AnimateTranslate("now-to-prev",0,-b),e+=W.getCss3AnimateTranslate("prev-to-now",-b,0),e+=W.getCss3AnimateTranslate("now-to-next",0,b),t=document.createElement("style"),t.setAttribute("type","text/css"),t.innerHTML=e,C.appendChild(t),i(),"function"==typeof g.create&&g.create(a())}function s(){var t=A.length;for(C.querySelector("style").removeAttribute("data-swipe"),window.removeEventListener("load",n,!1),C.removeEventListener("touchstart",Z.setStart),C.removeEventListener("touchmove",Z.setMove),C.removeEventListener("touchend",Z.setEnd),C.removeEventListener("touchcancel",Z.setEnd);--t>-1;)A[t].removeAttribute("data-swipe-idx"),A[t].removeEventListener("focus",o,!1),A[t].removeEventListener("blur",i,!1),A[t].removeEventListener(z.transitionsendJs,y,!1),A[t].removeEventListener(z.animationendJs,y,!1)}function i(){N&&null===$&&($=setInterval(p,g.slideShowTime))}function o(){clearInterval($),$=null}function r(){I=C.offsetWidth,R=I/2,W.setCss3(C,"perspective",2*I+"px")}function a(){return Y}function u(t){Y=t}function c(){return j}function l(t){j=t}function d(){var t=a();return--t<0&&(t=g.loop?B-1:-1),t}function f(){var t=a();return++t>B-1&&(t=g.loop?0:-1),t}function v(){h(d(),"prev")}function p(){h(f(),"next")}function h(t,e){var n=a(),s=t-n,i=1===arguments.length;return P?!1:t===n?!1:0>t||t>B-1?!1:J&&i&&(t>1||t%2===n%2)?!1:("undefined"==typeof e&&(e=s>0?"next":"prev"),J&&i&&t%2===1&&n%2===0&&(e="next"),l(t),m(),void w(g.duration,e))}function m(){var t=B,e=a(),n=c();for(S(),"function"==typeof g.before&&g.before(J?e%2:e);--t>-1;)A[t].style.visibility=t===e||t===n?"visible":"hidden"}function w(t,e){var n="",s="",i=a(),o=c(),r=(d(),f(),W.getCss3TransformPos(A[i]));0===r?(n="next"===e?"next-to-now":"prev-to-now",s="next"===e?"now-to-prev":"now-to-next",W.setCss3(A[i],"animation",s+" "+t+"ms"),W.setCss3(A[o],"animation",n+" "+t+"ms")):r%b===0?y({target:A[i]}):(W.setCss3Transition(A[i],t,"next"===e?-b:b),W.setCss3Transition(A[o],t,0))}function y(t){var e=a(),n=c(),s=0,i=0,o=B;if(parseInt(t.target.getAttribute("data-swipe-idx"),10)!==e)return!1;for(u(n),s=d(),i=f(),O[e]=n>e?-b:b,O[n]=0,W.setCss3Transition(A[e],0,O[e]),W.setCss3Transition(A[n],0,O[n]),W.setCss3(A[e],"animation",""),W.setCss3(A[n],"animation",""),-1!==s&&(O[s]=-b,W.setCss3Transition(A[s],0,O[s])),-1!==i&&(O[i]=b,W.setCss3Transition(A[i],0,O[i])),e=a();--o>-1;)A[o].style.visibility=o===e||o===s||o===i?"visible":"hidden";x(),"function"==typeof g.active&&g.active(J?e%2:e)}function S(){P=!0,o()}function x(){P=!1,i()}var b=90,g=null,C=null,E=null,A=null,T=null,_=null,L=null,k=null,M=null,$=null,J=!1,N=!1,P=!1,I=0,B=0,O=[],R=0,Y=0,j=0,z={},D={wrap:[],list:[],pages:[],toStart:[],toStop:[],toPrev:[],toNext:[],startEvents:"click",stopEvents:"click",moveEvents:"click",pageEvents:"click",slideShowTime:3e3,touchMinumRange:10,loop:!0,duration:500,create:null,before:null,active:null},W={extend:function(t,e){var n=null,s={};for(n in t)s[n]=n in e?e[n]:t[n];return s},isArray:function(t){return t?"[object Array]"===Object.prototype.toString.call(t):!1},trim:function(t){return t.replace(/(^\s*)|(\s*$)/gi,"")},dom2Array:function(t){var e=[],n=t.length,s=0;if(n>0)for(s=0;s<t.length;s++)e.push(t[s]);else e.push(t);return e},getCssPrefix:function(){var t=["-webkit-transition","transition"],e=["-webkit-transform","transform"],n=["-webkit-animation","animation"],s=["-webkit-keyframes","keyframes"],i=["webkitTransition","transition"],o=["webkitTransform","transform"],r=["webkitTransitionEnd","transitionend"],a=["webkitAnimationEnd","animationend"],u=window.getComputedStyle(document.body,""),c=(Array.prototype.slice.call(u).join("").match(/-(webkit|moz|ms|o)-/)||""===u.OLink&&["","o"])[1],l="WebKit|Moz|MS|O".match(new RegExp("("+c+")","i"))[1],d="webkit"===c;return{prefixCss:c,prefixJs:l.toLowerCase(),transitionsCss:t[d?0:1],transformsCss:e[d?0:1],keyframesCss:s[d?0:1],animationsCss:n[d?0:1],transformsJs:o[d?0:1],transitionsJs:i[d?0:1],animationsJs:n[d?0:1],transitionsendJs:r[d?0:1],animationendJs:a[d?0:1]}},hasCss3Animation:function(){var t=document.createElement("div"),e=t.style;return z.transitionsJs in e&&z.animationsJs in e},getCss3AnimateTranslate:function(t,e,n){var s="";return s="@"+z.keyframesCss+" "+t+"{",s+="from {",s+=z.transformsCss+": rotateY("+e+"deg) translateZ("+R+"px);",s+="}",s+="to {",s+=z.transformsCss+": rotateY("+n+"deg) translateZ("+R+"px);",s+="}",s+="}"},getCss3TransformPos:function(t){var e=t.style,n="";return n=e[z.transformsJs],n=n.substring(n.indexOf("(")+1,n.indexOf("deg")),parseFloat(n)},setListTransition:function(t,e,n){var s=0,i=0;for(i=0;B>i;i++)s=O[i],s+=e,n&&(O[i]=s),W.setCss3Transition(A[i],t,s)},setCss3Transition:function(t,e,n){W.setCss3(t,"transition",e+"ms"),W.setCss3(t,"transform","rotateY("+n+"deg) translateZ("+R+"px)")},setCss3:function(t,e,n){var s=t.style;"transition"===e?s[z.transitionsJs]=n:"transform"===e?s[z.transformsJs]=n:"animation"===e?s[z.animationsJs]=n:(s[e]=n,s["-"+z.prefixJs+"-"+e]=n)},setBtnEvent:function(t,e,n){for(var s=e.split(","),i=s.length,o=t.length,r="";--i>-1;)for(;--o>-1;)r=W.trim(s[i]),function(e){t[o].addEventListener(r,function(t){n(e),t.preventDefault()})}(o)}},Z={is_touch_start:!1,touch_start_x:0,touch_start_y:0,move_dx:0,setInitVaiable:function(){Z.is_touch_start=!1,Z.touch_start_x=0,Z.touch_start_y=0,Z.move_dx=0},canPrevMove:function(){return g.loop||-1!==d()?!0:!1},canNextMove:function(){var t=f(),e=(J?B-2:B)-1;return!g.loop&&(-1===t||t>e)?!1:!0},setStart:function(t){return Z.is_touch_start||P?!1:(S(),void(Z.is_touch_start||"touchstart"!==t.type||1!==t.touches.length||(Z.is_touch_start=!0,Z.touch_start_x=t.touches[0].pageX,Z.touch_start_y=t.touches[0].pageY,t.preventDefault())))},setMove:function(t){var e=0,n=0;Z.is_touch_start&&"touchmove"===t.type&&1===t.touches.length&&(e=t.touches[0].pageX-Z.touch_start_x,n=t.touches[0].pageY-Z.touch_start_y,Z.move_dx=e/I*100,Math.abs(e)>Math.abs(n)&&(Z.move_dx=Math.max(-b,Math.min(b,Z.move_dx)),W.setListTransition(0,Z.move_dx)),t.preventDefault())},setEnd:function(t){var e=Math.abs(Z.move_dx)>g.touchMinumRange,n=Z.move_dx<0,s=n?Z.canNextMove():Z.canPrevMove();Z.is_touch_start&&"touchend"===t.type&&t.touches.length<1&&(e&&s?(P=!1,n?p():v()):W.setListTransition(g.duration,0)),Z.setInitVaiable()}};return e()?{startSlideShow:i,stopSlideShow:o,refreshSize:r,getIdx:a,toNext:p,toPrev:v,toSlide:h,destory:s}:void 0}!function(t){"use strict";t.fn.cubeSwipe=function(e){return e.$list=e.$list?e.$list:t(this).find("> ul > li"),e.$wrap=e.$wrap?e.$wrap:t(this).find("> ul"),e.wrap=e.$wrap?e.$wrap.toArray():[],e.list=e.$list?e.$list.toArray():[],e.pages=e.$pages?e.$pages.toArray():[],e.toStart=e.$toStart?e.$toStart.toArray():[],e.toStop=e.$toStop?e.$toStop.toArray():[],e.toPrev=e.$toPrev?e.$toPrev.toArray():[],e.toNext=e.$toNext?e.$toNext.toArray():[],this.each(function(){t(this).data("cubeSwipe",new CubeSwipe(e))})},t.fn.cubeSwipe2start=function(){return this.each(function(){t(this).data("cubeSwipe").startSlideShow()})},t.fn.cubeSwipe2stop=function(){return this.each(function(){t(this).data("cubeSwipe").stopSlideShow()})},t.fn.cubeSwipe2prev=function(){return this.each(function(){t(this).data("cubeSwipe").toPrev()})},t.fn.cubeSwipe2next=function(){return this.each(function(){t(this).data("cubeSwipe").toNext()})},t.fn.cubeSwipe2toSlide=function(e){return this.each(function(){t(this).data("cubeSwipe").toSlide(e)})},t.fn.cubeSwipe2destory=function(){return this.each(function(){t(this).data("cubeSwipe").destory()})}}(jQuery);